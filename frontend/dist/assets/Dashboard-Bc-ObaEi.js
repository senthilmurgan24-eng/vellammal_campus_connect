import{c as V,a as U,r as g,j as t,L as S,b as E}from"./index-B-aueG5p.js";import{i as B,t as F,a as A}from"./useApi-NlOI4g3E.js";import{S as P,I as M}from"./ImageWithSkeleton-B2cUnDDk.js";const z=async()=>{var l;const a=await B.get("/student/dashboard");return((l=a.data)==null?void 0:l.data)??a.data},G=async()=>{var l;const a=await B.get("/student/performance");return((l=a.data)==null?void 0:l.data)??a.data},K=async()=>{var l;const a=await B.get("/notifications");return((l=a.data)==null?void 0:l.data)??a.data};var L={exports:{}};(function(a,l){(function(r,k){k(l)})(V,function(r){function k(c,e){c.terminate=function(){const s=()=>{};this.onerror=s,this.onmessage=s,this.onopen=s;const n=new Date,i=Math.random().toString().substring(2,8),o=this.onclose;this.onclose=p=>{const h=new Date().getTime()-n.getTime();e(`Discarded socket (#${i})  closed after ${h}ms, with code/reason: ${p.code}/${p.reason}`)},this.close(),o==null||o.call(c,{code:4001,reason:`Quick discarding socket (#${i}) without waiting for the shutdown sequence.`,wasClean:!1})}}const x={LF:`
`,NULL:"\0"};class u{get body(){return!this._body&&this.isBinaryBody&&(this._body=new TextDecoder().decode(this._binaryBody)),this._body||""}get binaryBody(){return!this._binaryBody&&!this.isBinaryBody&&(this._binaryBody=new TextEncoder().encode(this._body)),this._binaryBody}constructor(e){const{command:s,headers:n,body:i,binaryBody:o,escapeHeaderValues:p,skipContentLengthHeader:h}=e;this.command=s,this.headers=Object.assign({},n||{}),o?(this._binaryBody=o,this.isBinaryBody=!0):(this._body=i||"",this.isBinaryBody=!1),this.escapeHeaderValues=p||!1,this.skipContentLengthHeader=h||!1}static fromRawFrame(e,s){const n={},i=o=>o.replace(/^\s+|\s+$/g,"");for(const o of e.headers.reverse()){o.indexOf(":");const p=i(o[0]);let h=i(o[1]);s&&e.command!=="CONNECT"&&e.command!=="CONNECTED"&&(h=u.hdrValueUnEscape(h)),n[p]=h}return new u({command:e.command,headers:n,binaryBody:e.binaryBody,escapeHeaderValues:s})}toString(){return this.serializeCmdAndHeaders()}serialize(){const e=this.serializeCmdAndHeaders();return this.isBinaryBody?u.toUnit8Array(e,this._binaryBody).buffer:e+this._body+x.NULL}serializeCmdAndHeaders(){const e=[this.command];this.skipContentLengthHeader&&delete this.headers["content-length"];for(const s of Object.keys(this.headers||{})){const n=this.headers[s];this.escapeHeaderValues&&this.command!=="CONNECT"&&this.command!=="CONNECTED"?e.push(`${s}:${u.hdrValueEscape(`${n}`)}`):e.push(`${s}:${n}`)}return(this.isBinaryBody||!this.isBodyEmpty()&&!this.skipContentLengthHeader)&&e.push(`content-length:${this.bodyLength()}`),e.join(x.LF)+x.LF+x.LF}isBodyEmpty(){return this.bodyLength()===0}bodyLength(){const e=this.binaryBody;return e?e.length:0}static sizeOfUTF8(e){return e?new TextEncoder().encode(e).length:0}static toUnit8Array(e,s){const n=new TextEncoder().encode(e),i=new Uint8Array([0]),o=new Uint8Array(n.length+s.length+i.length);return o.set(n),o.set(s,n.length),o.set(i,n.length+s.length),o}static marshall(e){return new u(e).serialize()}static hdrValueEscape(e){return e.replace(/\\/g,"\\\\").replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/:/g,"\\c")}static hdrValueUnEscape(e){return e.replace(/\\r/g,"\r").replace(/\\n/g,`
`).replace(/\\c/g,":").replace(/\\\\/g,"\\")}}const f=0,b=10,y=13,I=58;class j{constructor(e,s){this.onFrame=e,this.onIncomingPing=s,this._encoder=new TextEncoder,this._decoder=new TextDecoder,this._token=[],this._initState()}parseChunk(e,s=!1){let n;if(typeof e=="string"?n=this._encoder.encode(e):n=new Uint8Array(e),s&&n[n.length-1]!==0){const i=new Uint8Array(n.length+1);i.set(n,0),i[n.length]=0,n=i}for(let i=0;i<n.length;i++){const o=n[i];this._onByte(o)}}_collectFrame(e){if(e!==f&&e!==y){if(e===b){this.onIncomingPing();return}this._onByte=this._collectCommand,this._reinjectByte(e)}}_collectCommand(e){if(e!==y){if(e===b){this._results.command=this._consumeTokenAsUTF8(),this._onByte=this._collectHeaders;return}this._consumeByte(e)}}_collectHeaders(e){if(e!==y){if(e===b){this._setupCollectBody();return}this._onByte=this._collectHeaderKey,this._reinjectByte(e)}}_reinjectByte(e){this._onByte(e)}_collectHeaderKey(e){if(e===I){this._headerKey=this._consumeTokenAsUTF8(),this._onByte=this._collectHeaderValue;return}this._consumeByte(e)}_collectHeaderValue(e){if(e!==y){if(e===b){this._results.headers.push([this._headerKey,this._consumeTokenAsUTF8()]),this._headerKey=void 0,this._onByte=this._collectHeaders;return}this._consumeByte(e)}}_setupCollectBody(){const e=this._results.headers.filter(s=>s[0]==="content-length")[0];e?(this._bodyBytesRemaining=parseInt(e[1],10),this._onByte=this._collectBodyFixedSize):this._onByte=this._collectBodyNullTerminated}_collectBodyNullTerminated(e){if(e===f){this._retrievedBody();return}this._consumeByte(e)}_collectBodyFixedSize(e){if(this._bodyBytesRemaining--===0){this._retrievedBody();return}this._consumeByte(e)}_retrievedBody(){this._results.binaryBody=this._consumeTokenAsRaw();try{this.onFrame(this._results)}catch(e){console.log("Ignoring an exception thrown by a frame handler. Original exception: ",e)}this._initState()}_consumeByte(e){this._token.push(e)}_consumeTokenAsUTF8(){return this._decoder.decode(this._consumeTokenAsRaw())}_consumeTokenAsRaw(){const e=new Uint8Array(this._token);return this._token=[],e}_initState(){this._results={command:void 0,headers:[],binaryBody:void 0},this._token=[],this._headerKey=void 0,this._onByte=this._collectFrame}}r.StompSocketState=void 0,function(c){c[c.CONNECTING=0]="CONNECTING",c[c.OPEN=1]="OPEN",c[c.CLOSING=2]="CLOSING",c[c.CLOSED=3]="CLOSED"}(r.StompSocketState||(r.StompSocketState={})),r.ActivationState=void 0,function(c){c[c.ACTIVE=0]="ACTIVE",c[c.DEACTIVATING=1]="DEACTIVATING",c[c.INACTIVE=2]="INACTIVE"}(r.ActivationState||(r.ActivationState={})),r.ReconnectionTimeMode=void 0,function(c){c[c.LINEAR=0]="LINEAR",c[c.EXPONENTIAL=1]="EXPONENTIAL"}(r.ReconnectionTimeMode||(r.ReconnectionTimeMode={})),r.TickerStrategy=void 0,function(c){c.Interval="interval",c.Worker="worker"}(r.TickerStrategy||(r.TickerStrategy={}));class W{constructor(e,s=r.TickerStrategy.Interval,n){this._interval=e,this._strategy=s,this._debug=n,this._workerScript=`
    var startTime = Date.now();
    setInterval(function() {
        self.postMessage(Date.now() - startTime);
    }, ${this._interval});
  `}start(e){this.stop(),this.shouldUseWorker()?this.runWorker(e):this.runInterval(e)}stop(){this.disposeWorker(),this.disposeInterval()}shouldUseWorker(){return typeof Worker<"u"&&this._strategy===r.TickerStrategy.Worker}runWorker(e){this._debug("Using runWorker for outgoing pings"),this._worker||(this._worker=new Worker(URL.createObjectURL(new Blob([this._workerScript],{type:"text/javascript"}))),this._worker.onmessage=s=>e(s.data))}runInterval(e){if(this._debug("Using runInterval for outgoing pings"),!this._timer){const s=Date.now();this._timer=setInterval(()=>{e(Date.now()-s)},this._interval)}}disposeWorker(){this._worker&&(this._worker.terminate(),delete this._worker,this._debug("Outgoing ping disposeWorker"))}disposeInterval(){this._timer&&(clearInterval(this._timer),delete this._timer,this._debug("Outgoing ping disposeInterval"))}}class m{constructor(e){this.versions=e}supportedVersions(){return this.versions.join(",")}protocolVersions(){return this.versions.map(e=>`v${e.replace(".","")}.stomp`)}}m.V1_0="1.0",m.V1_1="1.1",m.V1_2="1.2",m.default=new m([m.V1_2,m.V1_1,m.V1_0]);class R{get connectedVersion(){return this._connectedVersion}get connected(){return this._connected}constructor(e,s,n){this._client=e,this._webSocket=s,this._connected=!1,this._serverFrameHandlers={CONNECTED:i=>{this.debug(`connected to server ${i.headers.server}`),this._connected=!0,this._connectedVersion=i.headers.version,this._connectedVersion===m.V1_2&&(this._escapeHeaderValues=!0),this._setupHeartbeat(i.headers),this.onConnect(i)},MESSAGE:i=>{const o=i.headers.subscription,p=this._subscriptions[o]||this.onUnhandledMessage,h=i,_=this,N=this._connectedVersion===m.V1_2?h.headers.ack:h.headers["message-id"];h.ack=(w={})=>_.ack(N,o,w),h.nack=(w={})=>_.nack(N,o,w),p(h)},RECEIPT:i=>{const o=this._receiptWatchers[i.headers["receipt-id"]];o?(o(i),delete this._receiptWatchers[i.headers["receipt-id"]]):this.onUnhandledReceipt(i)},ERROR:i=>{this.onStompError(i)}},this._counter=0,this._subscriptions={},this._receiptWatchers={},this._partialData="",this._escapeHeaderValues=!1,this._lastServerActivityTS=Date.now(),this.debug=n.debug,this.stompVersions=n.stompVersions,this.connectHeaders=n.connectHeaders,this.disconnectHeaders=n.disconnectHeaders,this.heartbeatIncoming=n.heartbeatIncoming,this.heartbeatToleranceMultiplier=n.heartbeatGracePeriods,this.heartbeatOutgoing=n.heartbeatOutgoing,this.splitLargeFrames=n.splitLargeFrames,this.maxWebSocketChunkSize=n.maxWebSocketChunkSize,this.forceBinaryWSFrames=n.forceBinaryWSFrames,this.logRawCommunication=n.logRawCommunication,this.appendMissingNULLonIncoming=n.appendMissingNULLonIncoming,this.discardWebsocketOnCommFailure=n.discardWebsocketOnCommFailure,this.onConnect=n.onConnect,this.onDisconnect=n.onDisconnect,this.onStompError=n.onStompError,this.onWebSocketClose=n.onWebSocketClose,this.onWebSocketError=n.onWebSocketError,this.onUnhandledMessage=n.onUnhandledMessage,this.onUnhandledReceipt=n.onUnhandledReceipt,this.onUnhandledFrame=n.onUnhandledFrame,this.onHeartbeatReceived=n.onHeartbeatReceived,this.onHeartbeatLost=n.onHeartbeatLost}start(){const e=new j(n=>{const i=u.fromRawFrame(n,this._escapeHeaderValues);this.logRawCommunication||this.debug(`<<< ${i}`),(this._serverFrameHandlers[i.command]||this.onUnhandledFrame)(i)},()=>{this.debug("<<< PONG"),this.onHeartbeatReceived()});this._webSocket.onmessage=n=>{if(this.debug("Received data"),this._lastServerActivityTS=Date.now(),this.logRawCommunication){const i=n.data instanceof ArrayBuffer?new TextDecoder().decode(n.data):n.data;this.debug(`<<< ${i}`)}e.parseChunk(n.data,this.appendMissingNULLonIncoming)},this._webSocket.onclose=n=>{this.debug(`Connection closed to ${this._webSocket.url}`),this._cleanUp(),this.onWebSocketClose(n)},this._webSocket.onerror=n=>{this.onWebSocketError(n)};const s=()=>{const n=Object.assign({},this.connectHeaders);this.debug("Web Socket Opened..."),n["accept-version"]=this.stompVersions.supportedVersions(),n["heart-beat"]=[this.heartbeatOutgoing,this.heartbeatIncoming].join(","),this._transmit({command:"CONNECT",headers:n})};this._webSocket.readyState===r.StompSocketState.OPEN?s():this._webSocket.onopen=s}_setupHeartbeat(e){if(e.version!==m.V1_1&&e.version!==m.V1_2||!e["heart-beat"])return;const[s,n]=e["heart-beat"].split(",").map(i=>parseInt(i,10));if(this.heartbeatOutgoing!==0&&n!==0){const i=Math.max(this.heartbeatOutgoing,n);this.debug(`send PING every ${i}ms`),this._pinger=new W(i,this._client.heartbeatStrategy,this.debug),this._pinger.start(()=>{this._webSocket.readyState===r.StompSocketState.OPEN&&(this._webSocket.send(x.LF),this.debug(">>> PING"))})}if(this.heartbeatIncoming!==0&&s!==0){const i=Math.max(this.heartbeatIncoming,s);this.debug(`check PONG every ${i}ms`),this._ponger=setInterval(()=>{const o=Date.now()-this._lastServerActivityTS;o>i*this.heartbeatToleranceMultiplier&&(this.debug(`did not receive server activity for the last ${o}ms`),this.onHeartbeatLost(),this._closeOrDiscardWebsocket())},i)}}_closeOrDiscardWebsocket(){this.discardWebsocketOnCommFailure?(this.debug("Discarding websocket, the underlying socket may linger for a while"),this.discardWebsocket()):(this.debug("Issuing close on the websocket"),this._closeWebsocket())}forceDisconnect(){this._webSocket&&(this._webSocket.readyState===r.StompSocketState.CONNECTING||this._webSocket.readyState===r.StompSocketState.OPEN)&&this._closeOrDiscardWebsocket()}_closeWebsocket(){this._webSocket.onmessage=()=>{},this._webSocket.close()}discardWebsocket(){typeof this._webSocket.terminate!="function"&&k(this._webSocket,e=>this.debug(e)),this._webSocket.terminate()}_transmit(e){const{command:s,headers:n,body:i,binaryBody:o,skipContentLengthHeader:p}=e,h=new u({command:s,headers:n,body:i,binaryBody:o,escapeHeaderValues:this._escapeHeaderValues,skipContentLengthHeader:p});let _=h.serialize();if(this.logRawCommunication?this.debug(`>>> ${_}`):this.debug(`>>> ${h}`),this.forceBinaryWSFrames&&typeof _=="string"&&(_=new TextEncoder().encode(_)),typeof _!="string"||!this.splitLargeFrames)this._webSocket.send(_);else{let N=_;for(;N.length>0;){const w=N.substring(0,this.maxWebSocketChunkSize);N=N.substring(this.maxWebSocketChunkSize),this._webSocket.send(w),this.debug(`chunk sent = ${w.length}, remaining = ${N.length}`)}}}dispose(){if(this.connected)try{const e=Object.assign({},this.disconnectHeaders);e.receipt||(e.receipt=`close-${this._counter++}`),this.watchForReceipt(e.receipt,s=>{this._closeWebsocket(),this._cleanUp(),this.onDisconnect(s)}),this._transmit({command:"DISCONNECT",headers:e})}catch(e){this.debug(`Ignoring error during disconnect ${e}`)}else(this._webSocket.readyState===r.StompSocketState.CONNECTING||this._webSocket.readyState===r.StompSocketState.OPEN)&&this._closeWebsocket()}_cleanUp(){this._connected=!1,this._pinger&&(this._pinger.stop(),this._pinger=void 0),this._ponger&&(clearInterval(this._ponger),this._ponger=void 0)}publish(e){const{destination:s,headers:n,body:i,binaryBody:o,skipContentLengthHeader:p}=e,h=Object.assign({destination:s},n);this._transmit({command:"SEND",headers:h,body:i,binaryBody:o,skipContentLengthHeader:p})}watchForReceipt(e,s){this._receiptWatchers[e]=s}subscribe(e,s,n={}){n=Object.assign({},n),n.id||(n.id=`sub-${this._counter++}`),n.destination=e,this._subscriptions[n.id]=s,this._transmit({command:"SUBSCRIBE",headers:n});const i=this;return{id:n.id,unsubscribe(o){return i.unsubscribe(n.id,o)}}}unsubscribe(e,s={}){s=Object.assign({},s),delete this._subscriptions[e],s.id=e,this._transmit({command:"UNSUBSCRIBE",headers:s})}begin(e){const s=e||`tx-${this._counter++}`;this._transmit({command:"BEGIN",headers:{transaction:s}});const n=this;return{id:s,commit(){n.commit(s)},abort(){n.abort(s)}}}commit(e){this._transmit({command:"COMMIT",headers:{transaction:e}})}abort(e){this._transmit({command:"ABORT",headers:{transaction:e}})}ack(e,s,n={}){n=Object.assign({},n),this._connectedVersion===m.V1_2?n.id=e:n["message-id"]=e,n.subscription=s,this._transmit({command:"ACK",headers:n})}nack(e,s,n={}){return n=Object.assign({},n),this._connectedVersion===m.V1_2?n.id=e:n["message-id"]=e,n.subscription=s,this._transmit({command:"NACK",headers:n})}}class C{get webSocket(){var e;return(e=this._stompHandler)==null?void 0:e._webSocket}get disconnectHeaders(){return this._disconnectHeaders}set disconnectHeaders(e){this._disconnectHeaders=e,this._stompHandler&&(this._stompHandler.disconnectHeaders=this._disconnectHeaders)}get connected(){return!!this._stompHandler&&this._stompHandler.connected}get connectedVersion(){return this._stompHandler?this._stompHandler.connectedVersion:void 0}get active(){return this.state===r.ActivationState.ACTIVE}_changeState(e){this.state=e,this.onChangeState(e)}constructor(e={}){this.stompVersions=m.default,this.connectionTimeout=0,this.reconnectDelay=5e3,this._nextReconnectDelay=0,this.maxReconnectDelay=15*60*1e3,this.reconnectTimeMode=r.ReconnectionTimeMode.LINEAR,this.heartbeatIncoming=1e4,this.heartbeatToleranceMultiplier=2,this.heartbeatOutgoing=1e4,this.heartbeatStrategy=r.TickerStrategy.Interval,this.splitLargeFrames=!1,this.maxWebSocketChunkSize=8*1024,this.forceBinaryWSFrames=!1,this.appendMissingNULLonIncoming=!1,this.discardWebsocketOnCommFailure=!1,this.state=r.ActivationState.INACTIVE;const s=()=>{};this.debug=s,this.beforeConnect=s,this.onConnect=s,this.onDisconnect=s,this.onUnhandledMessage=s,this.onUnhandledReceipt=s,this.onUnhandledFrame=s,this.onHeartbeatReceived=s,this.onHeartbeatLost=s,this.onStompError=s,this.onWebSocketClose=s,this.onWebSocketError=s,this.logRawCommunication=!1,this.onChangeState=s,this.connectHeaders={},this._disconnectHeaders={},this.configure(e)}configure(e){Object.assign(this,e),this.maxReconnectDelay>0&&this.maxReconnectDelay<this.reconnectDelay&&(this.debug(`Warning: maxReconnectDelay (${this.maxReconnectDelay}ms) is less than reconnectDelay (${this.reconnectDelay}ms). Using reconnectDelay as the maxReconnectDelay delay.`),this.maxReconnectDelay=this.reconnectDelay)}activate(){const e=()=>{if(this.active){this.debug("Already ACTIVE, ignoring request to activate");return}this._changeState(r.ActivationState.ACTIVE),this._nextReconnectDelay=this.reconnectDelay,this._connect()};this.state===r.ActivationState.DEACTIVATING?(this.debug("Waiting for deactivation to finish before activating"),this.deactivate().then(()=>{e()})):e()}async _connect(){if(await this.beforeConnect(this),this._stompHandler){this.debug("There is already a stompHandler, skipping the call to connect");return}if(!this.active){this.debug("Client has been marked inactive, will not attempt to connect");return}this.connectionTimeout>0&&(this._connectionWatcher&&clearTimeout(this._connectionWatcher),this._connectionWatcher=setTimeout(()=>{this.connected||(this.debug(`Connection not established in ${this.connectionTimeout}ms, closing socket`),this.forceDisconnect())},this.connectionTimeout)),this.debug("Opening Web Socket...");const e=this._createWebSocket();this._stompHandler=new R(this,e,{debug:this.debug,stompVersions:this.stompVersions,connectHeaders:this.connectHeaders,disconnectHeaders:this._disconnectHeaders,heartbeatIncoming:this.heartbeatIncoming,heartbeatGracePeriods:this.heartbeatToleranceMultiplier,heartbeatOutgoing:this.heartbeatOutgoing,heartbeatStrategy:this.heartbeatStrategy,splitLargeFrames:this.splitLargeFrames,maxWebSocketChunkSize:this.maxWebSocketChunkSize,forceBinaryWSFrames:this.forceBinaryWSFrames,logRawCommunication:this.logRawCommunication,appendMissingNULLonIncoming:this.appendMissingNULLonIncoming,discardWebsocketOnCommFailure:this.discardWebsocketOnCommFailure,onConnect:s=>{if(this._connectionWatcher&&(clearTimeout(this._connectionWatcher),this._connectionWatcher=void 0),this._nextReconnectDelay=this.reconnectDelay,!this.active){this.debug("STOMP got connected while deactivate was issued, will disconnect now"),this._disposeStompHandler();return}this.onConnect(s)},onDisconnect:s=>{this.onDisconnect(s)},onStompError:s=>{this.onStompError(s)},onWebSocketClose:s=>{this._stompHandler=void 0,this.state===r.ActivationState.DEACTIVATING&&this._changeState(r.ActivationState.INACTIVE),this.onWebSocketClose(s),this.active&&this._schedule_reconnect()},onWebSocketError:s=>{this.onWebSocketError(s)},onUnhandledMessage:s=>{this.onUnhandledMessage(s)},onUnhandledReceipt:s=>{this.onUnhandledReceipt(s)},onUnhandledFrame:s=>{this.onUnhandledFrame(s)},onHeartbeatReceived:()=>{this.onHeartbeatReceived()},onHeartbeatLost:()=>{this.onHeartbeatLost()}}),this._stompHandler.start()}_createWebSocket(){let e;if(this.webSocketFactory)e=this.webSocketFactory();else if(this.brokerURL)e=new WebSocket(this.brokerURL,this.stompVersions.protocolVersions());else throw new Error("Either brokerURL or webSocketFactory must be provided");return e.binaryType="arraybuffer",e}_schedule_reconnect(){this._nextReconnectDelay>0&&(this.debug(`STOMP: scheduling reconnection in ${this._nextReconnectDelay}ms`),this._reconnector=setTimeout(()=>{this.reconnectTimeMode===r.ReconnectionTimeMode.EXPONENTIAL&&(this._nextReconnectDelay=this._nextReconnectDelay*2,this.maxReconnectDelay!==0&&(this._nextReconnectDelay=Math.min(this._nextReconnectDelay,this.maxReconnectDelay))),this._connect()},this._nextReconnectDelay))}async deactivate(e={}){var o;const s=e.force||!1,n=this.active;let i;if(this.state===r.ActivationState.INACTIVE)return this.debug("Already INACTIVE, nothing more to do"),Promise.resolve();if(this._changeState(r.ActivationState.DEACTIVATING),this._nextReconnectDelay=0,this._reconnector&&(clearTimeout(this._reconnector),this._reconnector=void 0),this._stompHandler&&this.webSocket.readyState!==r.StompSocketState.CLOSED){const p=this._stompHandler.onWebSocketClose;i=new Promise((h,_)=>{this._stompHandler.onWebSocketClose=N=>{p(N),h()}})}else return this._changeState(r.ActivationState.INACTIVE),Promise.resolve();return s?(o=this._stompHandler)==null||o.discardWebsocket():n&&this._disposeStompHandler(),i}forceDisconnect(){this._stompHandler&&this._stompHandler.forceDisconnect()}_disposeStompHandler(){this._stompHandler&&this._stompHandler.dispose()}publish(e){this._checkConnection(),this._stompHandler.publish(e)}_checkConnection(){if(!this.connected)throw new TypeError("There is no underlying STOMP connection")}watchForReceipt(e,s){this._checkConnection(),this._stompHandler.watchForReceipt(e,s)}subscribe(e,s,n={}){return this._checkConnection(),this._stompHandler.subscribe(e,s,n)}unsubscribe(e,s={}){this._checkConnection(),this._stompHandler.unsubscribe(e,s)}begin(e){return this._checkConnection(),this._stompHandler.begin(e)}commit(e){this._checkConnection(),this._stompHandler.commit(e)}abort(e){this._checkConnection(),this._stompHandler.abort(e)}ack(e,s,n={}){this._checkConnection(),this._stompHandler.ack(e,s,n)}nack(e,s,n={}){this._checkConnection(),this._stompHandler.nack(e,s,n)}}class d{}class v{}class D{constructor(e){this.client=e}get outgoing(){return this.client.heartbeatOutgoing}set outgoing(e){this.client.heartbeatOutgoing=e}get incoming(){return this.client.heartbeatIncoming}set incoming(e){this.client.heartbeatIncoming=e}}class O extends C{constructor(e){super(),this.maxWebSocketFrameSize=16*1024,this._heartbeatInfo=new D(this),this.reconnect_delay=0,this.webSocketFactory=e,this.debug=(...s)=>{console.log(...s)}}_parseConnect(...e){let s,n,i,o={};if(e.length<2)throw new Error("Connect requires at least 2 arguments");if(typeof e[1]=="function")[o,n,i,s]=e;else switch(e.length){case 6:[o.login,o.passcode,n,i,s,o.host]=e;break;default:[o.login,o.passcode,n,i,s]=e}return[o,n,i,s]}connect(...e){const s=this._parseConnect(...e);s[0]&&(this.connectHeaders=s[0]),s[1]&&(this.onConnect=s[1]),s[2]&&(this.onStompError=s[2]),s[3]&&(this.onWebSocketClose=s[3]),super.activate()}disconnect(e,s={}){e&&(this.onDisconnect=e),this.disconnectHeaders=s,super.deactivate()}send(e,s={},n=""){s=Object.assign({},s);const i=s["content-length"]===!1;i&&delete s["content-length"],this.publish({destination:e,headers:s,body:n,skipContentLengthHeader:i})}set reconnect_delay(e){this.reconnectDelay=e}get ws(){return this.webSocket}get version(){return this.connectedVersion}get onreceive(){return this.onUnhandledMessage}set onreceive(e){this.onUnhandledMessage=e}get onreceipt(){return this.onUnhandledReceipt}set onreceipt(e){this.onUnhandledReceipt=e}get heartbeat(){return this._heartbeatInfo}set heartbeat(e){this.heartbeatIncoming=e.incoming,this.heartbeatOutgoing=e.outgoing}}class T{static client(e,s){s==null&&(s=m.default.protocolVersions());const n=()=>{const i=T.WebSocketClass||WebSocket;return new i(e,s)};return new O(n)}static over(e){let s;return typeof e=="function"?s=e:(console.warn("Stomp.over did not receive a factory, auto reconnect will not work. Please see https://stomp-js.github.io/api-docs/latest/classes/Stomp.html#over"),s=()=>e),new O(s)}}T.WebSocketClass=null,r.Client=C,r.CompatClient=O,r.FrameImpl=u,r.Parser=j,r.Stomp=T,r.StompConfig=d,r.StompHeaders=v,r.Versions=m})})(L,L.exports);var Y=L.exports;const H="/ws-connect";function X({onMessage:a,topics:l}){const{push:r}=U(),k=g.useRef(null),x=g.useRef([]);return g.useEffect(()=>{const u=F.getAccessToken(),f=new Y.Client({brokerURL:H.startsWith("ws")?H:void 0,connectHeaders:u?{Authorization:`Bearer ${u}`}:{},webSocketFactory:H.startsWith("ws")?void 0:()=>new WebSocket(H),reconnectDelay:3e3,heartbeatIncoming:1e4,heartbeatOutgoing:1e4,debug:void 0,onStompError:b=>r({variant:"error",title:"WebSocket error",description:b.body}),onWebSocketClose:()=>r({variant:"warning",title:"Disconnected",description:"Realtime updates paused"}),onWebSocketError:()=>r({variant:"error",title:"WebSocket error"})});return f.onConnect=()=>{x.current=l.map(b=>f.subscribe(b,y=>{a==null||a(y)})),r({variant:"success",title:"Realtime connected"})},f.activate(),k.current=f,()=>{x.current.forEach(b=>b.unsubscribe()),x.current=[],f.deactivate(),k.current=null}},[l.join("|")]),g.useMemo(()=>{var u;return{send:(f,b)=>{var y;return(y=k.current)==null?void 0:y.publish({destination:f,body:JSON.stringify(b)})},connected:((u=k.current)==null?void 0:u.connected)??!1}},[])}const q=g.memo(({course:a})=>{const l={"--value":a.percent,"--progress-color":a.color};return t.jsxs("div",{className:"p-4 rounded-xl border border-slate-100 dark:border-slate-800 bg-slate-50/50 dark:bg-slate-800/30 flex flex-col items-center",children:[t.jsx("div",{className:"relative w-24 h-24 flex items-center justify-center mb-4",children:t.jsx("div",{className:"circular-progress w-full h-full rounded-full flex items-center justify-center",style:l,children:t.jsx("div",{className:"w-[85%] h-[85%] bg-white dark:bg-slate-900 rounded-full flex flex-col items-center justify-center",children:t.jsxs("span",{className:"text-lg font-bold",children:[a.percent,"%"]})})})}),t.jsx("h4",{className:"font-bold text-slate-900 dark:text-white",children:a.name}),t.jsx("p",{className:"text-xs text-slate-500",children:a.remainingLabel})]})}),Q=g.memo(({item:a})=>{const l=a.priority==="high"?t.jsx("span",{className:"text-[10px] uppercase font-black text-primary bg-primary/10 px-2 py-0.5 rounded",children:"High Priority"}):null;return t.jsxs("div",{className:E("flex items-start gap-4 p-4 rounded-xl",{"bg-slate-50 dark:bg-slate-800/50 border-l-4 border-primary":a.priority==="high","bg-slate-50 dark:bg-slate-800/50 border-l-4 border-emerald-500 opacity-60":a.completed,"bg-slate-50 dark:bg-slate-800/50":!a.priority&&!a.completed}),children:[t.jsx("div",{className:"mt-1",children:t.jsx("input",{className:E("rounded h-5 w-5 cursor-pointer",{"text-primary focus:ring-primary":!a.completed,"text-emerald-500 focus:ring-emerald-500":a.completed}),type:"checkbox",defaultChecked:a.completed})}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex justify-between items-start",children:[t.jsx("h5",{className:E("font-bold text-slate-900 dark:text-white",{"line-through":a.completed}),children:a.title}),l]}),t.jsx("p",{className:"text-sm text-slate-500 mt-1",children:a.subtitle})]})]})}),J=g.memo(({test:a})=>{const l={"--bar-color":a.colorHex};return t.jsxs("div",{className:"relative pl-6 before:absolute before:left-0 before:top-0 before:bottom-0 before:w-1 before:rounded-full before:bg-[var(--bar-color)] before:content-['']",style:l,children:[t.jsx("p",{className:"text-xs font-bold uppercase tracking-tighter",style:{color:a.colorHex},children:a.type}),t.jsx("h5",{className:"font-bold text-sm mt-1",children:a.title}),t.jsxs("div",{className:"flex items-center gap-2 mt-3 text-slate-500",children:[t.jsx("span",{className:"material-symbols-outlined text-sm",children:"schedule"}),t.jsxs("span",{className:"text-xs font-medium",children:["Starts in: ",t.jsx("span",{className:"text-slate-900 dark:text-white font-bold",children:a.startsIn})]})]}),a.type.toLowerCase().includes("mock")&&t.jsxs("div",{className:"mt-4 flex gap-2",children:[t.jsx("button",{className:"flex-1 py-2 bg-primary text-white text-xs font-bold rounded-lg",children:"View Syllabus"}),t.jsx("button",{className:"px-3 py-2 bg-slate-100 dark:bg-slate-800 rounded-lg",children:t.jsx("span",{className:"material-symbols-outlined text-sm",children:"bookmark"})})]})]})}),Z=g.memo(({resource:a})=>t.jsxs(S,{to:"#",className:"flex flex-col items-center p-4 bg-slate-50 dark:bg-slate-800 rounded-xl hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors",children:[t.jsx("span",{className:E("material-symbols-outlined mb-2",a.colorClass),children:a.icon}),t.jsx("span",{className:"text-[10px] font-bold uppercase text-slate-500",children:a.label})]})),$=g.memo(({notificationsCount:a})=>t.jsxs("aside",{className:"w-64 border-r border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 flex flex-col shrink-0",children:[t.jsxs("div",{className:"p-6 flex items-center gap-3",children:[t.jsx("div",{className:"bg-primary text-white p-2 rounded-lg flex items-center justify-center",children:t.jsx("span",{className:"material-symbols-outlined text-2xl",children:"school"})}),t.jsxs("div",{children:[t.jsx("h1",{className:"font-bold text-lg leading-tight",children:"Vellammal"}),t.jsx("p",{className:"text-xs text-slate-500 font-medium uppercase tracking-wider",children:"Campus Connect"})]})]}),t.jsxs("nav",{className:"flex-1 px-4 space-y-2 mt-4",children:[t.jsxs(S,{className:"flex items-center gap-3 px-4 py-3 rounded-xl bg-primary/10 text-primary font-semibold",to:"/dashboard",children:[t.jsx("span",{className:"material-symbols-outlined",children:"dashboard"}),t.jsx("span",{children:"Dashboard"})]}),t.jsxs(S,{className:"flex items-center gap-3 px-4 py-3 rounded-xl text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors",to:"#",children:[t.jsx("span",{className:"material-symbols-outlined",children:"menu_book"}),t.jsx("span",{children:"My Courses"})]}),t.jsxs(S,{className:"flex items-center gap-3 px-4 py-3 rounded-xl text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors",to:"/practice-tests",children:[t.jsx("span",{className:"material-symbols-outlined",children:"assignment"}),t.jsx("span",{children:"Practice Tests"})]}),t.jsxs(S,{className:"flex items-center gap-3 px-4 py-3 rounded-xl text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors",to:"/analytics",children:[t.jsx("span",{className:"material-symbols-outlined",children:"leaderboard"}),t.jsx("span",{children:"Analytics"})]}),t.jsxs(S,{className:"flex items-center gap-3 px-4 py-3 rounded-xl text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors",to:"/store",children:[t.jsx("span",{className:"material-symbols-outlined",children:"event"}),t.jsx("span",{children:"Store"})]})]}),t.jsx("div",{className:"p-4 mt-auto",children:t.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800 p-4 rounded-xl",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[t.jsx("div",{className:"h-10 w-10 rounded-full bg-slate-300 overflow-hidden",children:t.jsx(M,{src:"https://lh3.googleusercontent.com/aida-public/AB6AXuApccJV5fPXYVdoAxjKOgQCIXJk9py-zTtuRiazHkF_1u4qf7sphMO-v8FVbRN1rrYHNyrKnNXLiCNweOrteAjnfsmULf3mI0WyhxT0ccaHAmzXScK-DQE7mXh7z1rAY_ZPexKW6KjO0R85GvlF23mYQoXYmo_msg2VH4XvGJJDG7ly9Hf7fy0o7hfE_o1IkvnYfgmMA_wwdyWRV0gSjI0RtOCwGil9Nu764sumphPYLqyuoqsrCaMTKc30uPDZIUrstJZD7Moo7Wda",alt:"Profile",className:"w-full h-full object-cover",skeletonClassName:"w-full h-full"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-bold",children:"Abishek R."}),t.jsx("p",{className:"text-xs text-slate-500",children:"NEET Aspirant"})]})]}),t.jsxs("button",{className:"w-full flex items-center justify-center gap-2 text-xs font-bold py-2 bg-white dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-lg hover:bg-slate-100 transition-colors",children:[t.jsx("span",{className:"material-symbols-outlined text-sm",children:"settings"}),"Account Settings"]}),t.jsxs("p",{className:"text-[11px] text-slate-400 mt-3 text-center",children:["Notifications: ",a]})]})})]})),ne=()=>{const{data:a,isLoading:l}=A(["dashboard"],"/student/dashboard",{queryFn:z,staleTime:6e5}),{data:r,isLoading:k}=A(["performance"],"/student/performance",{queryFn:G}),{data:x}=A(["notifications"],"/notifications",{queryFn:K,staleTime:2*60*1e3}),[u,f]=g.useState([]);X({topics:["/topic/notifications","/topic/live-updates"],onMessage:d=>{try{const v=JSON.parse(d.body);f(D=>[v,...D].slice(0,10))}catch(v){console.error("WS parse error",v)}}});const b=g.useMemo(()=>[...u??[],...x??[]],[u,x]),y=g.useMemo(()=>[{name:"Physics",percent:85,remainingLabel:"12 topics left",color:"#8b5cf6"},{name:"Chemistry",percent:60,remainingLabel:"24 topics left",color:"#137fec"},{name:"Biology",percent:72,remainingLabel:"18 topics left",color:"#10b981"}],[]),I=g.useMemo(()=>[{title:"Watch Organic Chemistry Part 2",subtitle:"Video Lecture • 45 mins",priority:"high"},{title:"Solve 50 Kinematics MCQs",subtitle:"Practice Session • Estimated 1h 20m"},{title:"Revise Cell Biology Notes",subtitle:"Revision • Completed",completed:!0}],[]),j=g.useMemo(()=>[{type:"Mock Exam",title:"Full Syllabus Mock Test #04",startsIn:"02d 04h 20m",colorHex:"#137fec"},{type:"Subject Wise",title:"Organic Chemistry Mastery",startsIn:"05d 08h 15m",colorHex:"#fb923c"}],[]),W=g.useMemo(()=>[{icon:"description",label:"Formulas",colorClass:"text-primary"},{icon:"history",label:"PYQs",colorClass:"text-emerald-500"},{icon:"lightbulb",label:"Shortcuts",colorClass:"text-orange-500"},{icon:"groups",label:"Doubt Room",colorClass:"text-purple-500"}],[]),m=(a==null?void 0:a.streak)??12,R=(a==null?void 0:a.points)??1250,C=(r==null?void 0:r.percentile)??94;return t.jsx("div",{className:"bg-background-light dark:bg-background-dark text-slate-900 dark:text-slate-100 font-display",children:t.jsxs("div",{className:"flex min-h-screen overflow-hidden",children:[t.jsx($,{notificationsCount:b.length}),t.jsxs("main",{className:"flex-1 overflow-y-auto",children:[t.jsxs("header",{className:"h-16 border-b border-slate-200 dark:border-slate-800 bg-white/80 dark:bg-slate-900/80 backdrop-blur-md sticky top-0 z-10 px-8 flex items-center justify-between",children:[t.jsx("div",{className:"flex items-center gap-4 flex-1",children:t.jsxs("div",{className:"relative w-full max-w-md",children:[t.jsx("span",{className:"material-symbols-outlined absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",children:"search"}),t.jsx("input",{className:"w-full bg-slate-100 dark:bg-slate-800 border-none rounded-lg pl-10 pr-4 py-2 text-sm focus:ring-2 focus:ring-primary/50",placeholder:"Search topics, videos, or tests...",type:"text"})]})}),t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsxs("button",{className:"relative p-2 text-slate-500 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-lg transition-colors",children:[t.jsx("span",{className:"material-symbols-outlined",children:"notifications"}),b.length>0&&t.jsx("span",{className:"absolute top-2 right-2 w-2 h-2 bg-red-500 rounded-full border-2 border-white dark:border-slate-900"})]}),t.jsx("button",{className:"px-4 py-2 bg-primary text-white text-sm font-bold rounded-lg hover:bg-primary/90 transition-colors",children:"Upgrade Plan"})]})]}),t.jsxs("div",{className:"p-8 space-y-8",children:[t.jsxs("section",{className:"flex flex-col lg:flex-row gap-6",children:[t.jsxs("div",{className:"flex-1",children:[t.jsxs("h2",{className:"text-3xl font-black tracking-tight text-slate-900 dark:text-white",children:["Welcome back, ",(a==null?void 0:a.userName)??"Abishek","!"]}),t.jsxs("p",{className:"text-slate-500 mt-1",children:["You've completed ",(r==null?void 0:r.weeklyCompletion)??75,"% of your weekly goals. Keep pushing!"]})]}),t.jsxs("div",{className:"flex items-center gap-4 bg-white dark:bg-slate-900 p-4 rounded-xl border border-slate-200 dark:border-slate-800 shadow-sm",children:[t.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-orange-100 dark:bg-orange-900/30 text-orange-600 dark:text-orange-400 rounded-lg",children:[t.jsx("span",{className:"material-symbols-outlined fill-1",children:"local_fire_department"}),t.jsxs("span",{className:"font-bold",children:[m," Day Streak"]})]}),t.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 rounded-lg",children:[t.jsx("span",{className:"material-symbols-outlined",children:"military_tech"}),t.jsxs("span",{className:"font-bold",children:[R.toLocaleString()," Points"]})]}),t.jsxs("div",{className:"flex items-center gap-3 pl-4 border-l border-slate-200 dark:border-slate-700",children:[t.jsx("div",{className:"h-10 w-10 flex items-center justify-center bg-primary/10 rounded-full text-primary",title:"Physics Pro Badge",children:t.jsx("span",{className:"material-symbols-outlined",children:"bolt"})}),t.jsx("span",{className:"text-xs font-bold uppercase tracking-wider text-slate-400",children:"Physics Pro"})]})]})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[t.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[t.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-2xl p-6 border border-slate-200 dark:border-slate-800 shadow-sm",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsx("h3",{className:"font-bold text-lg",children:"Course Progress"}),t.jsx("button",{className:"text-primary text-sm font-semibold hover:underline",children:"View All"})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:y.map(d=>t.jsx(q,{course:d},d.name))})]}),t.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-2xl p-6 border border-slate-200 dark:border-slate-800 shadow-sm",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsx("h3",{className:"font-bold text-lg",children:"Daily Study Planner"}),t.jsx("div",{className:"flex items-center gap-2",children:t.jsx("span",{className:"text-xs font-bold text-slate-400 bg-slate-100 dark:bg-slate-800 px-2 py-1 rounded",children:new Date().toLocaleDateString(void 0,{month:"short",day:"2-digit",year:"numeric"})})})]}),t.jsxs("div",{className:"space-y-4",children:[I.map(d=>t.jsx(Q,{item:d},d.title)),t.jsxs("button",{className:"w-full py-3 border-2 border-dashed border-slate-200 dark:border-slate-700 rounded-xl text-slate-400 text-sm font-bold hover:border-primary hover:text-primary transition-all flex items-center justify-center gap-2",children:[t.jsx("span",{className:"material-symbols-outlined",children:"add"}),"Add New Task"]})]})]})]}),t.jsxs("div",{className:"space-y-8",children:[t.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-2xl p-6 border border-slate-200 dark:border-slate-800 shadow-sm",children:[t.jsx("h3",{className:"font-bold text-lg mb-6",children:"Upcoming Tests"}),t.jsx("div",{className:"space-y-6",children:j.map((d,v)=>t.jsxs("div",{children:[t.jsx(J,{test:d}),v<j.length-1&&t.jsx("hr",{className:"border-slate-100 dark:border-slate-800 mt-6"})]},d.title))})]}),t.jsxs("div",{className:"bg-gradient-to-br from-primary to-blue-700 rounded-2xl p-6 text-white shadow-lg relative overflow-hidden",children:[t.jsxs("div",{className:"relative z-10",children:[t.jsx("p",{className:"text-blue-100 text-sm font-medium",children:"Monthly Assessment"}),k?t.jsx(P,{className:"h-8 mt-2"}):t.jsxs("h4",{className:"text-3xl font-bold mt-1",children:[C,"th Percentile"]}),t.jsx("p",{className:"text-blue-100/80 text-xs mt-4 leading-relaxed",children:"Your performance in Chemistry is 15% higher than last month. You are currently in the Top 5% of aspirants nationwide."}),t.jsx("button",{className:"mt-6 w-full py-2 bg-white/20 hover:bg-white/30 backdrop-blur-md rounded-lg text-xs font-bold transition-all",children:"Download Detailed Report"})]}),t.jsx("span",{className:"material-symbols-outlined absolute -bottom-4 -right-4 text-9xl opacity-10 rotate-12",children:"trending_up"})]}),t.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-2xl p-6 border border-slate-200 dark:border-slate-800 shadow-sm",children:[t.jsx("h3",{className:"font-bold text-lg mb-4",children:"Quick Resources"}),t.jsx("div",{className:"grid grid-cols-2 gap-3",children:W.map(d=>t.jsx(Z,{resource:d},d.label))})]})]})]}),t.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-2xl p-6 border border-slate-200 dark:border-slate-800 shadow-sm",children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsx("h2",{className:"text-lg font-semibold",children:"Notifications"}),t.jsx("p",{className:"text-xs text-slate-500",children:"Realtime via WebSocket + cached"})]}),t.jsxs("div",{className:"divide-y divide-slate-100 dark:divide-slate-800 max-h-96 overflow-y-auto no-scrollbar",children:[b.map(d=>t.jsxs("div",{className:"py-3",children:[t.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-100",children:d.title}),t.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:d.body}),t.jsx("p",{className:"text-[11px] text-slate-400",children:new Date(d.ts).toLocaleString()})]},d.id)),!b.length&&t.jsx("p",{className:"text-sm text-slate-500 py-2",children:"No notifications"})]})]})]})]})]})})};export{ne as default};
//# sourceMappingURL=Dashboard-Bc-ObaEi.js.map
